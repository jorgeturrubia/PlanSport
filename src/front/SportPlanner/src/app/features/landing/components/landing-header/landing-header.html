<!-- Header Navigation -->
<header 
  [class]="headerClasses()"
  (keydown)="handleKeyDown($event)"
  role="banner">
  
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8" role="navigation" aria-label="Navegación principal">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo -->
      <div class="flex items-center">
        <a 
          href="#hero" 
          (click)="navigateToSection($event, '#hero')"
          class="flex items-center space-x-2 text-2xl font-bold transition-colors"
          [class.text-white]="!isScrolled()"
          [class.text-primary-dark]="isScrolled()"
          aria-label="PlanSport - Ir al inicio">
          <fa-icon 
            [icon]="faFutbol" 
            class="text-3xl"
            [attr.aria-hidden]="true"></fa-icon>
          <span>PlanSport</span>
        </a>
      </div>
      
      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <!-- Nav Links -->
        <div class="flex space-x-6">
          @for (item of navItems; track item.href) {
            <a 
              [href]="item.href"
              (click)="navigateToSection($event, item.href)"
              class="flex items-center space-x-1 px-3 py-2 text-sm font-medium transition-all duration-200 rounded-md"
              [class.text-white]="!isScrolled() && !isLinkActive(item.href)"
              [class.hover:text-gray-300]="!isScrolled()"
              [class.text-gray-700]="isScrolled() && !isLinkActive(item.href)"
              [class.hover:text-primary]="isScrolled()"
              [class.text-primary]="isLinkActive(item.href) && isScrolled()"
              [class.text-yellow-400]="isLinkActive(item.href) && !isScrolled()"
              [class.bg-primary-light]="isLinkActive(item.href) && isScrolled()"
              [class.bg-white]="isLinkActive(item.href) && !isScrolled()"
              [class.bg-opacity-20]="isLinkActive(item.href) && !isScrolled()"
              [attr.aria-current]="isLinkActive(item.href) ? 'page' : null">
              <fa-icon 
                [icon]="item.icon" 
                class="text-lg"
                [attr.aria-hidden]="true"></fa-icon>
              <span>{{ item.label }}</span>
            </a>
          }
        </div>
        
        <!-- Auth Buttons -->
        <div class="flex items-center space-x-3">
          <a 
            routerLink="/login"
            class="flex items-center space-x-1 px-4 py-2 text-sm font-medium transition-colors rounded-md"
            [class.text-white]="!isScrolled()"
            [class.hover:text-gray-300]="!isScrolled()"
            [class.text-gray-700]="isScrolled()"
            [class.hover:text-primary]="isScrolled()"
            aria-label="Iniciar sesión">
            <fa-icon 
              [icon]="faSignInAlt" 
              [attr.aria-hidden]="true"></fa-icon>
            <span>Iniciar Sesión</span>
          </a>
          
          <a 
            routerLink="/register"
            class="flex items-center space-x-1 px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-primary-dark rounded-md transition-colors shadow-md hover:shadow-lg"
            aria-label="Registrarse">
            <fa-icon 
              [icon]="faUserPlus" 
              [attr.aria-hidden]="true"></fa-icon>
            <span>Registrarse</span>
          </a>
        </div>
      </div>
      
      <!-- Mobile Menu Button -->
      <button
        type="button"
        (click)="toggleMobileMenu()"
        class="md:hidden inline-flex items-center justify-center p-2 rounded-md transition-colors"
        [class.text-white]="!isScrolled()"
        [class.hover:text-gray-300]="!isScrolled()"
        [class.hover:bg-white]="!isScrolled()"
        [class.hover:bg-opacity-20]="!isScrolled()"
        [class.text-gray-700]="isScrolled()"
        [class.hover:text-primary]="isScrolled()"
        [class.hover:bg-gray-100]="isScrolled()"
        [attr.aria-expanded]="mobileMenuOpen()"
        aria-label="Menú de navegación"
        aria-controls="mobile-menu">
        <fa-icon 
          [icon]="mobileMenuOpen() ? faTimes : faBars" 
          class="text-2xl"
          [attr.aria-hidden]="true"></fa-icon>
      </button>
    </div>
  </nav>
  
  <!-- Mobile Menu -->
  @if (mobileMenuOpen()) {
    <div 
      id="mobile-menu"
      class="md:hidden fixed inset-0 top-16 bg-white z-40"
      [@slideMenu]="menuState()"
      role="navigation"
      aria-label="Menú móvil">
      
      <div class="px-4 pt-4 pb-6 space-y-4">
        <!-- Mobile Nav Links -->
        <div class="space-y-2">
          @for (item of navItems; track item.href) {
            <a 
              [href]="item.href"
              (click)="navigateToSection($event, item.href)"
              class="flex items-center space-x-2 px-4 py-3 text-base font-medium rounded-md transition-colors"
              [class.bg-primary-light]="isLinkActive(item.href)"
              [class.text-primary-dark]="isLinkActive(item.href)"
              [class.text-gray-700]="!isLinkActive(item.href)"
              [class.hover:bg-gray-100]="!isLinkActive(item.href)"
              [attr.aria-current]="isLinkActive(item.href) ? 'page' : null">
              <fa-icon 
                [icon]="item.icon" 
                class="text-xl"
                [attr.aria-hidden]="true"></fa-icon>
              <span>{{ item.label }}</span>
            </a>
          }
        </div>
        
        <!-- Mobile Auth Buttons -->
        <div class="pt-4 border-t border-gray-200 space-y-2">
          <a 
            routerLink="/login"
            (click)="closeMobileMenu()"
            class="flex items-center justify-center space-x-2 w-full px-4 py-3 text-base font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors">
            <fa-icon 
              [icon]="faSignInAlt" 
              [attr.aria-hidden]="true"></fa-icon>
            <span>Iniciar Sesión</span>
          </a>
          
          <a 
            routerLink="/register"
            (click)="closeMobileMenu()"
            class="flex items-center justify-center space-x-2 w-full px-4 py-3 text-base font-medium text-white bg-primary hover:bg-primary-dark rounded-md transition-colors shadow-md">
            <fa-icon 
              [icon]="faUserPlus" 
              [attr.aria-hidden]="true"></fa-icon>
            <span>Registrarse</span>
          </a>
        </div>
      </div>
    </div>
    
    <!-- Mobile Menu Overlay -->
    <div 
      class="md:hidden fixed inset-0 bg-black bg-opacity-50 z-30"
      (click)="closeMobileMenu()"
      aria-hidden="true"></div>
  }
</header>
