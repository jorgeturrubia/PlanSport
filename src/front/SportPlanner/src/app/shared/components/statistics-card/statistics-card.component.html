<div 
  [class]="getCardClasses()"
  (click)="onCardClick()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
  [attr.aria-label]="title + ': ' + value"
  role="button"
  [tabindex]="clickable && !disabled ? 0 : -1"
>
  <!-- Background gradient overlay -->
  <div class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-300"
       [class]="'from-' + colorTheme + '-500/5 to-transparent'">
  </div>

  <!-- Loading skeleton -->
  <div *ngIf="isLoading" class="relative z-10" data-testid="loading-skeleton">
    <div class="animate-pulse">
      <div class="flex items-start justify-between">
        <div>
          <div class="h-4 bg-gray-300 dark:bg-gray-600 rounded w-24 mb-2"></div>
          <div class="h-8 bg-gray-300 dark:bg-gray-600 rounded w-16 mb-2"></div>
          <div class="h-3 bg-gray-300 dark:bg-gray-600 rounded w-20"></div>
        </div>
        <div class="w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-xl"></div>
      </div>
      <div class="mt-4 h-1 bg-gray-200 dark:bg-gray-700 rounded-full">
        <div class="h-full bg-gray-300 dark:bg-gray-600 rounded-full w-3/4"></div>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div *ngIf="!isLoading" class="relative z-10">
    <div class="flex items-start justify-between">
      <div class="flex-1">
        <p class="text-sm font-medium mb-1"
           [class]="'text-' + colorTheme + '-600 dark:text-' + colorTheme + '-400'"
           data-testid="card-title">
          {{ title }}
        </p>
        
        <p class="text-3xl font-bold text-gray-900 dark:text-white mb-2"
           data-testid="card-value">
          {{ formattedValue() }}
        </p>
        
        <p *ngIf="subtitle" 
           class="text-xs text-gray-500 dark:text-gray-400"
           data-testid="card-subtitle">
          {{ subtitle }}
        </p>
      </div>
      
      <div class="flex-shrink-0">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300"
             [class]="'bg-' + colorTheme + '-500/20 dark:bg-' + colorTheme + '-400/20'">
          <app-sport-icon 
            *ngIf="sportIcon" 
            [sport]="sportIcon" 
            [color]="colorTheme"
            size="medium">
          </app-sport-icon>
          <ng-icon 
            *ngIf="!sportIcon"
            name="heroArrowTrendingUp" 
            class="w-6 h-6"
            [class]="'text-' + colorTheme + '-600 dark:text-' + colorTheme + '-400'">
          </ng-icon>
        </div>
      </div>
    </div>
    
    <!-- Progress bar -->
    <div *ngIf="progress >= 0" class="mt-4">
      <div class="h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
        <div 
          [class]="getProgressBarClasses()"
          [style.width.%]="currentProgress()"
          data-testid="progress-bar">
        </div>
      </div>
    </div>
  </div>
</div>