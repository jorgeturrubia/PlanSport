<header class="bg-white fixed top-0 left-0 right-0 z-50" style="box-shadow: var(--shadow-header)" #headerElement>
  <nav class="container-custom">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <h1 
          class="text-2xl font-bold text-primary-600 cursor-pointer hover:text-primary-700 transition-colors duration-200"
          (click)="onLogoClick()"
          [class.opacity-50]="isNavigating()"
          [class.cursor-not-allowed]="isNavigating()"
        >
          PlanSport
        </h1>
      </div>
      
      <!-- Desktop Navigation -->
      <div class="hidden md:block">
        <div class="ml-10 flex items-baseline space-x-4">
          <a *ngFor="let item of menuItems" 
             (click)="navigateToSection(item.section)"
             [class]="'px-3 py-2 rounded-md text-sm font-medium cursor-pointer transition-colors ' + 
                      (isActiveSection(item.section) ? 
                       'text-primary-600 bg-primary-50 border-b-2 border-primary-600' : 
                       'text-gray-700 hover:text-primary-600')">
            {{ item.label }}
          </a>
        </div>
      </div>
      
      <!-- Auth Buttons -->
      <div class="hidden md:flex items-center space-x-4">
        <button 
          (click)="onLogin()" 
          [disabled]="isNavigating()"
          [class.opacity-50]="isNavigating()"
          [class.cursor-not-allowed]="isNavigating()"
          class="btn-secondary">
          @if (isNavigating()) {
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"></div>
              <span>Cargando...</span>
            </div>
          } @else {
            Iniciar Sesión
          }
        </button>
        <button 
          (click)="onRegister()" 
          [disabled]="isNavigating()"
          [class.opacity-50]="isNavigating()"
          [class.cursor-not-allowed]="isNavigating()"
          class="btn-primary">
          @if (isNavigating()) {
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
              <span>Cargando...</span>
            </div>
          } @else {
            Registrarse
          }
        </button>
      </div>
      
      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button (click)="toggleMobileMenu()" class="p-2 text-gray-700 hover:text-primary-600">
          <ng-icon [name]="isMobileMenuOpen ? XIcon : MenuIcon" class="w-6 h-6"></ng-icon>
        </button>
      </div>
    </div>
    
    <!-- Mobile Navigation -->
    <div *ngIf="isMobileMenuOpen" 
         class="md:hidden bg-white border-t border-gray-200 animate-slide-down">
      <div class="px-2 pt-2 pb-3 space-y-1">
        <a *ngFor="let item of menuItems" 
           (click)="navigateToSection(item.section)"
           [class]="'block px-3 py-2 rounded-md text-base font-medium cursor-pointer transition-colors ' + 
                    (isActiveSection(item.section) ? 
                     'text-primary-600 bg-primary-50 border-l-4 border-primary-600' : 
                     'text-gray-700 hover:text-primary-600 hover:bg-gray-50')">
          {{ item.label }}
        </a>
        <div class="pt-4 pb-2 border-t border-gray-200 mt-4">
          <button 
            (click)="onLogin()" 
            [disabled]="isNavigating()"
            [class.opacity-50]="isNavigating()"
            [class.cursor-not-allowed]="isNavigating()"
            class="w-full mb-2 btn-secondary">
            @if (isNavigating()) {
              <div class="flex items-center justify-center gap-2">
                <div class="w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"></div>
                <span>Cargando...</span>
              </div>
            } @else {
              Iniciar Sesión
            }
          </button>
          <button 
            (click)="onRegister()" 
            [disabled]="isNavigating()"
            [class.opacity-50]="isNavigating()"
            [class.cursor-not-allowed]="isNavigating()"
            class="w-full btn-primary">
            @if (isNavigating()) {
              <div class="flex items-center justify-center gap-2">
                <div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                <span>Cargando...</span>
              </div>
            } @else {
              Registrarse
            }
          </button>
        </div>
      </div>
    </div>
  </nav>
</header>